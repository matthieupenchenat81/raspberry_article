<!DOCTYPE html>
<html>
<head>
    <link href="css/metro.css" rel="stylesheet">
    <script src="js/jquery-2.2.0.min.js"></script>
    <script src="d3/d3.min.js"></script>
</head>
<body>

<h1 style="text-align: center">... FastReading ...</h1>
<br><br>

<div class="grid">
    <div class="row cells4">
        <div class="cell"></div>
        <div class="cell colspan3">

            <!-- Tiles -->
            <div class="tile">
                <div class="tile-content">
                    <div class="image-container">
                        <a href="detail.html">
                            <div class="frame">
                                <img src="image/1.jpg">
                            </div>
                            <div class="image-overlay">
                                La vie des indiens
                            </div>
                        </a>
                    </div>
                </div>
            </div>

            <div class="tile">
                <div class="tile-content">
                    <div class="image-container">
                        <a href="detail.html">
                            <div class="frame">
                                <img src="image/2.jpg">
                            </div>
                            <div class="image-overlay">
                                La vie des elephants
                            </div>
                        </a>
                    </div>
                </div>
            </div>

            <div class="tile">
                <div class="tile-content">
                    <div class="image-container">
                        <a href="detail.html">
                            <div class="frame">
                                <img src="image/3.jpg">
                            </div>
                            <div class="image-overlay">
                                La vie des ours
                            </div>
                        </a>
                    </div>
                </div>
            </div>

            <div class="tile">
                <div class="tile-content">
                    <div class="image-container">
                        <a href="detail.html">
                            <div class="frame">
                                <img src="image/4.jpg">
                            </div>
                            <div class="image-overlay">
                                La vie d'HomerSimpson
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<svg width="100%" height="100%"></svg>

<script type="application/javascript">

    function sleep(milliseconds) {
        var start = new Date().getTime();
        for (var i = 0; i < 1e7; i++) {
            if ((new Date().getTime() - start) > milliseconds){
                break;
            }
        }
    }

    $(".grid").css('display', "none");
    var time;
    var url = "http://192.168.9.19:8080/statusSensor.html";
    $.ajaxSetup(({cache:false}));
    var timeoutID = window.setInterval(function() {
        $.get(url, function(data) {
            if (data == '0') {
                if (new Date().getTime() - time > 10000) {
                    $(".grid").css('display', "none");
                    $("svg").css('display', "block");
                }
            }
            else {
                $(".grid").css('display', "block");
                $("svg").css('display', "none");
                time = new Date().getTime();
            }
        });
    }, 1000);

    // Create circles
    var svg = d3.select("svg");
    arr = svg.selectAll("circle")
            .data([50, 350, 650, 950])
            .enter().append("circle")
            .attr("cy", 60)
            .attr("cx", function(d, i) { return d+100; })
            .attr("r", 50);

    $(document).ready(function() {

        function turn() {
            svg.selectAll("circle")
                    .data([50, 350, 650, 950], function(d) { return d; })
                    .transition().duration(1000).attr("cx", function(d) { return d + 300})
                    .transition().duration(1000).attr("cy", 500)
                    .transition().duration(1000).attr("cx", function(d) { return d})
                    .transition().duration(1000).attr("cy", 60);
        }
        setInterval(turn, 5000);
    });
</script>

</body>
</html>